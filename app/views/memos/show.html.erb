<div class="container mx-auto px-4 py-8">
  <div class="max-w-2xl mx-auto">
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <div class="flex justify-between items-start mb-4">
        <div>
          <h1 class="text-2xl font-bold mb-2"><%= @memo.title %></h1>
          <p class="text-gray-600">カテゴリ: <%= @memo.category %></p>
        </div>
        <div class="space-x-2">
          <%= link_to '編集', edit_child_memo_path(current_child, @memo), class: 'text-blue-500 hover:text-blue-700' %>
          <%= button_to '削除', child_memo_path(current_child, @memo), method: :delete, class: 'text-red-500 hover:text-red-700', data: { confirm: '本当に削除しますか？' } %>
        </div>
      </div>

      <div class="prose max-w-none mb-6">
        <%= simple_format(@memo.body) %>
      </div>

      <% if @memo.images.attached? %>
        <div class="grid grid-cols-2 gap-4 mb-6">
          <% @memo.images.each do |image| %>
            <div class="relative">
              <%= image_tag image, class: 'w-full h-48 object-cover rounded' %>
            </div>
          <% end %>
        </div>
      <% end %>

      <div class="text-sm text-gray-500">
        作成日時: <%= l @memo.created_at, format: :long %>
      </div>
    </div>

    <% if @memo.comments.any? %>
      <div class="bg-white rounded-lg shadow-md p-6">
        <h2 class="text-xl font-semibold mb-4">保護者からのコメント</h2>
        <div class="space-y-4">
          <% @memo.comments.each do |comment| %>
            <div class="bg-gray-50 rounded p-4">
              <p class="text-gray-700"><%= simple_format(comment.body) %></p>
              <p class="text-sm text-gray-500 mt-2">
                <%= l comment.created_at, format: :long %>
              </p>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>

    <div class="mt-6">
      <%= link_to 'メモ一覧に戻る', child_memos_path(current_child), class: 'text-blue-500 hover:text-blue-700' %>
    </div>
  </div>
</div> 